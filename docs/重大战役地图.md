# 重大战役地图程序文档

## 1. 需求文档
- 目的：提供全国省份战役分布的可视化入口，支持快速查询并跳转到各省战役详情页。
- 用户：普通访客、历史学习者、活动参与者。
- 功能需求：
  - 展示全国地图与各省标记；各省有独立详情页（如 上海、云南 等 HTML）。
  - 搜索框输入省份名称，调用后端接口查询并跳转到对应省份页面。
  - 页面保持简洁、可点击热点准确覆盖省份位置。
- 非功能：适配主流浏览器，静态资源自包含，无外部 CDN 依赖；界面需保证搜索提示和按钮交互友好。

## 2. 设计文档
- 架构：纯前端静态页面（Axure 导出），位于 [frontend/web/battles/中国地图.html](frontend/web/battles/中国地图.html)，依赖本地资源目录 `resources/`、`data/`、`files/`、`images/`。
- 路由与导航：
  - 入口：导航菜单“重大战役”指向 `/battles/中国地图.html`。
  - 各省详情：同目录下存在省份页面（如 [frontend/web/battles/上海.html](frontend/web/battles/上海.html)、[frontend/web/battles/云南.html](frontend/web/battles/云南.html) 等）。
  - 搜索接口：前端 AJAX 请求 `/index.php?r=battles/search-province&name=<省名>`，期望返回 `{ success, data: { url } }` JSON 并跳转。
- 交互设计：
  - 右上角固定搜索框，按钮 hover 变色，错误信息 3 秒自动隐藏。
  - 地图采用静态图片加热点标记，点击/跳转逻辑由 Axure 导出脚本定义。

## 3. 实现文档
- 核心文件：
  - [frontend/web/battles/中国地图.html](frontend/web/battles/中国地图.html)：主地图页，加载 Axure 生成的脚本与样式，内置搜索逻辑（底部自定义 JS）。
  - 依赖资源：`frontend/web/battles/resources/`、`data/`、`files/`、`images/`（Axure 生成的交互与样式）。
  - 省份页面：同目录下各省 HTML，供跳转显示对应战役信息。
- 关键逻辑：
  - 搜索：`XMLHttpRequest` GET 到 `/index.php?r=battles/search-province&name=...`，成功则 `window.location.href = response.data.url`，失败显示提示。
  - 交互样式：内联 CSS 控制搜索框样式与按钮 hover 效果；地图交互由 Axure 脚本驱动。
- 依赖：无需额外 JS 库（Axure自带 jQuery 3.2.1），无构建步骤，纯静态部署。

## 4. 用户手册
- 访问路径：通过站点导航点击“重大战役”，或直接打开 `/battles/中国地图.html`。
- 搜索使用：在右上角输入省份名称（如“北京”），点击“搜索”或回车；若后端返回匹配 URL 会自动跳转，否则顶部显示提示。
- 直接浏览：可在地图上点击省份标记（由 Axure 热点定义）进入对应省份页面。
- 部署：保持 `frontend/web/battles/` 目录完整上传即可；确保后端提供 `/index.php?r=battles/search-province` 接口，否则搜索仅显示“未找到”提示。
